;/*FB_PKG_DELIM*/

__d("PolarisProfileTabTaggedPhotosConstants",[],(function(a,b,c,d,e,f){"use strict";a="tagged";f.TAGGED_TAB_ID=a}),66);
__d("PolarisSavedPostsActionGetAudioCollectionUpdatedInfo",["PolarisSavedPostsTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.items;a=a.page_info;var e=a.more_available;a=a.next_max_id;return{audio:c,collectionId:d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.AUDIO_AUTO_COLLECTION,userId:b,pagination:{cursor:a,moreAvailable:e}}}g.getAudioCollectionUpdatedInfo=a}),98);
__d("PolarisAPIFetchTabbedSavedCollectionPosts",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("PolarisInstapi").apiGet("/api/v1/feed/collection/{collection_id}/posts/",{path:{collection_id:a},query:{max_id:b}}).then(function(a){return a.data})}g.fetchTabbedSavedCollectionPosts=a}),98);
__d("PolarisAPIGetSavedAudio",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=null);return d("PolarisInstapi").apiPost("/api/v1/music/playlist/{playlist_id}/",{body:{cursor:(a=a)!=null?a:void 0},path:{playlist_id:"bookmarked"}}).then(function(a){return a.data})}g.getSavedAudio=a}),98);
__d("PolarisAPIGetSavedMediaPosts",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=null);return d("PolarisInstapi").apiGet("/api/v1/feed/saved/posts/",{query:{max_id:(a=a)!=null?a:void 0}}).then(function(a){return a.data})}g.getSavedMediaPosts=a}),98);
__d("PolarisSavedPostsActionRequestSavedCollectionPosts",["PolarisAPIFetchTabbedSavedCollectionPosts","PolarisAPIGetSavedAudio","PolarisAPIGetSavedMediaPosts","PolarisGenericStrings","PolarisPostModel","PolarisSavedPostsActionGetAudioCollectionUpdatedInfo","PolarisSavedPostsTypes","PolarissavedPostsSelectors","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return function(c){var d=function(){return c(h(a,b))};return c(i({collectionId:a,retryHandler:d,userId:b}))}}function i(a){var b=a.collectionId,c=a.retryHandler,e=a.userId;return function(a,f){a({type:"SAVED_COLLECTION_MEDIA_LOADING",userId:e,collectionId:b});f=d("PolarissavedPostsSelectors").getSavedCollectionsMediaPaginationForUser(f(),{collectionId:b,userId:e});if(b===d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION)return a(j({pagination:f,retryHandler:c,userId:e}));return b===d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.AUDIO_AUTO_COLLECTION?a(k({pagination:f,retryHandler:c,userId:e})):a(l({collectionId:b,pagination:f,retryHandler:c,userId:e}))}}function j(a){var b=a.pagination,e=a.retryHandler,f=a.userId;return function(a,g){return d("PolarisAPIGetSavedMediaPosts").getSavedMediaPosts(b.cursor).then(function(b){var e=b.items,g=b.more_available;b=b.next_max_id;e=e.map(function(a){return c("PolarisPostModel").fromNativeResponseRaw(a.media).toReduxStore()});a({type:"SAVED_COLLECTION_MEDIA_UPDATED",posts:e,collectionId:d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION,userId:f,pagination:{cursor:b,isFetching:!1,moreAvailable:g}})})["catch"](function(b){a({collectionId:d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION,toast:{text:d("PolarisGenericStrings").FAILED_TO_LOAD_TEXT,actionText:d("PolarisGenericStrings").RETRY_TEXT,actionHandler:e},type:"SAVED_COLLECTION_MEDIA_ERRORED",userId:f})})}}function k(a){var c=a.pagination,e=a.retryHandler,f=a.userId;return function(a,g){var h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.prev=0;i.next=3;return b("regeneratorRuntime").awrap(d("PolarisAPIGetSavedAudio").getSavedAudio(c.cursor));case 3:g=i.sent;h=d("PolarisSavedPostsActionGetAudioCollectionUpdatedInfo").getAudioCollectionUpdatedInfo(g,f);a(babelHelpers["extends"]({type:"AUDIO_COLLECTION_DATA_UPDATED"},h));i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](0),a({collectionId:d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.AUDIO_AUTO_COLLECTION,toast:{text:d("PolarisGenericStrings").FAILED_TO_LOAD_TEXT,actionText:d("PolarisGenericStrings").RETRY_TEXT,actionHandler:e},type:"SAVED_COLLECTION_MEDIA_ERRORED",userId:f});case 11:case"end":return i.stop()}},null,this,[[0,8]])}}function l(a){var b=a.collectionId,e=a.pagination,f=a.retryHandler,g=a.userId;return function(a,h){return d("PolarisAPIFetchTabbedSavedCollectionPosts").fetchTabbedSavedCollectionPosts(b,(h=e.cursor)!=null?h:"").then(function(d){var e=d.items,f=d.more_available;d=d.next_max_id;e=e.map(function(a){return c("PolarisPostModel").fromNativeResponseRaw(a.media).toReduxStore()});a({type:"SAVED_COLLECTION_MEDIA_UPDATED",posts:e,collectionId:b,userId:g,pagination:{cursor:d,isFetching:!1,moreAvailable:f}})})["catch"](function(c){a({type:"SAVED_COLLECTION_MEDIA_ERRORED",toast:{text:d("PolarisGenericStrings").FAILED_TO_LOAD_TEXT,actionText:d("PolarisGenericStrings").RETRY_TEXT,actionHandler:f},collectionId:b,userId:g})})}}g.requestSavedCollectionPosts=h}),98);